---
layout: post
title: "灵敏度分析 Sensitivity Analysis"
categories: "Bus_Int_Mod"
permalink: /:categories/:day/:month/:year
---
## 灵敏度分析

### 灵敏度报告组成

接着上一章，我们来到最重要的环节，理解并运用灵敏度分析。
如图4.1，slover为我们提供三种报告：
![figure_4.1.png](https://github.com/Frankfsh/learn_datascience_with_me_blog/blob/gh-pages/images/Bus_Int_Mod/figure_4.1.png?raw=true)
它们分别是：

* 运算结果 Answer
* 灵敏度 Sensitivity
* 上下限值 Limits

### 灵敏度报告分析

最重要的就是灵敏度报告，也是我们解读的重点。它汇总了当单元格内的数据改变时，最优解的敏感程度。我们在之前学到了，当目标函数的系数变化时，最优解会发生变化，产生多重最优解，甚至无解。
我们先来看看着报告长什么样：
![figure_4.3.png](https://github.com/Frankfsh/learn_datascience_with_me_blog/blob/gh-pages/images/Bus_Int_Mod/figure_4.3.png?raw=true)

我们注意到，对于变量单元格和约束单元格我们都有允许改变的range。这有一个前提条件，就是假设其他所有系数都保持不变时有效。我们后面会学到，如何确定同时改变两个或者多个目标函数的系数，现在的解仍然是保持最优。

#### 多重最优解

有一个或者多个变量在目标函数的系数的可增加或者可减少量等于零，在非退化的情况下，这表明多重最优解存在。非退化会在后面详细介绍。

#### 松紧约束

在运算结果报告中给出了各个约束的松紧情况，这也可以通过灵敏度报告得到验证。当约束的终值等于约束的右侧值的时候，此约束为紧约束。反之为松约束。紧约意味着它严格满足最优解的等式，在以上例子中，在产出最优解的时候，水泵（200）和劳工（1566）都被用完了，所以它们为紧约束。

#### 约束右侧值

改变约束右侧值会改变可行域，从而在某些情况中改变最优解的值。

### 影子价格（shadow price）

#### 松约束的影子价格

影子价格对应约束。一个约束的影子价格给出，当这个约束的右侧值增加一个单位引起目标函数值改变的数量。如果一个影子价格是正数，相关约束的右侧值增加会导致目标函数值增加。反之，则减少。但是增加和减少值必须在允许改变的范围内。
如果一个约束的影子价格为零，则意味着在允许改变的范围内，右侧值得变化不会影响目标函数值的变化。在以上例子中，水管（2880）没有被用完，为松约束，影子价格为0，意味着提供再多的水管也不会导致目标函数增加，过量供给了。

**松约束的影子价格一定为零**

#### 影子价格和附加资源的价值

如果在上述例子中，增加了新员工，使得可用工时增加162（从1566到1728），这个增加在允许范围（234）内，可以预期目标函数将会增加2700（16.67*162，图中为round up值17）变为68800（66100+2700）。

如4.6为改变约束右侧值后的slover结果。

![figure_4.6.png](https://github.com/Frankfsh/learn_datascience_with_me_blog/blob/gh-pages/images/Bus_Int_Mod/figure_4.6.png?raw=true)



那我们究竟愿意支付多少钱去达到这个增益呢，答案是不定的。如果工人的工资是计时收费，也就是可变成本，我们愿意支付包含原始工资额外的16.67；如果工人的工资是固定的浸没陈本，我们则只愿支付16.67。

继续讨论，如果现在可以生产一种新型的浴缸typhoo-lagoon，它需要1台水泵，8个工时和13英尺水管，获得320美元利润，我们应不应该生产这种产品呢？要回答这个问题，就需要用到影子价格。制造一台typhoo-lagoon浴缸会占用现有的资源，这些资源原本可以产生333.33 (1\*200+8\*16.67+0\*13)利润，但是只能获利320，所以生产新型浴缸是不合算的。

### 减少成本（reduced cost）

#### 何为减少成本

减少成本也叫机会成本，它等于每个产品贡献到利润中的量减去它所消耗的每单位的资源价值（消耗资源按照影子价格定价），按照这样的计算，上面提到的typhoo-lagoon浴缸的减少成本则为-13.33（320-333.33）。

![figure_4.9.png](https://github.com/Frankfsh/learn_datascience_with_me_blog/blob/gh-pages/images/Bus_Int_Mod/figure_4.9.png?raw=true)

如图4.6所示，可以在slover给出的新的灵敏报告得证。

#### 减少成本的最优解

任何机会成本为负的产品，将不会出现在最优解中，除非增加限制它必须存在。不知道你意识到没有，aqua-spas和hydro-luxes的减少成本为0，这当然不是巧合。因为它们的最优值位于简单上下限之间。这是一定的。下面将最优的减少成本汇总到一个表里，加深对其的理解。

| 问题类型 | 决策变量的最优值 | 减少成本的最优值 |
| -------- | ---------------- | ---------------- |
| 最大化   | 等于下限         | 非正             |
| 最大化   | 位于上下限       | 零               |
| 最大化   | 等于上限         | 非负             |
| 最小化   | 等于下限         | 非负             |
| 最小化   | 位于上下限       | 零               |
| 最小化   | 等于上限         | 非正             |

其实减少成本描述的问题是该如何改进目标函数，在最大化问题中，改进意味着增加。反之在最小化问题中，改进意味着减少。以下以最大化问题分析：

* 当决策变量的最优值等于下限时，说明该变量无法用于改进目标函数。如例子中的typhoon-lagoons浴缸，决策变量等于下限（0），能少制造就少制造，所以减少成本的最优值为非正，帮倒忙的意思。
* 当决策变量的最优值位于上下限之间时，说明资源的影子价格与产品的边际利润相等。减少成本一定等于零。也就是没帮上忙。
* 当决策变量的最优解等于上限时，说明该变量有助于改进目标函数。能多制造就多制造，所以减少成本最优值非负。但是只要减少成本不为零，则说明不是最优解。所以这种情况只会在有多余限制的情况下出现。

### 同时改变目标函数的系数
